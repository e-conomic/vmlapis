syntax = "proto3";

package ssn.ocrservice.v1;

option go_package = "ocrservice";

import "google/cloud/vision_v1/proto/text_annotation.proto";

// Interface exported by the server.
service OcrService {
  rpc OcrScanImage(OcrScanImageRequest) returns (OcrScanImageResponse);
}

message OcrScanImageRequest {
  bytes data = 1;
}

message OcrScanImageResponse {
  string tess_hocr = 1;
  // Aspect ratio is kept, but image might have been resized before
  // text annotation was done, boundary polygons should be multiplied
  // with the scale factor to get the position of the polygon on the
  // original image
  double scale_factor = 2;
  // TextAnnotation -> Page -> Block -> Paragraph -> Word -> Symbol
  google.cloud.vision.v1.TextAnnotation text_annotation = 3;
}
